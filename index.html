<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لكل الطلاب - مساعدك الدراسي الذكي</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .hero-section {
            background: linear-gradient(rgba(0, 51, 102, 0.8), rgba(0, 21, 41, 0.9)), url('https://placehold.co/1920x1080/003366/FFFFFF?text=Modern+Classroom');
            background-size: cover;
            background-position: center;
        }
        .whitespace-pre-wrap {
            white-space: pre-wrap;
        }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-blue-900">لكل الطلاب</h1>
            <a href="login.html" class="bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition duration-300">
                ابدأ الآن مجانًا
            </a>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section text-white text-center py-20 md:py-32">
        <div class="container mx-auto px-6">
            <h1 class="text-4xl md:text-6xl font-extrabold mb-4 leading-tight">ادرس بذكاء، وليس بجهد أكبر</h1>
            <p class="text-lg md:text-xl mb-8 max-w-3xl mx-auto">مساعدك الذكي للطالب: من الملف إلى الامتحان. حلل، لخّص، وأجب على أسئلتك فورًا.</p>
            <a href="login.html" class="bg-white text-blue-900 font-bold py-3 px-8 rounded-full text-lg hover:bg-gray-200 transition duration-300">
                جرّب الآن مجانًا
            </a>
        </div>
    </section>

    <!-- Features Section -->
    <section class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-12">كل ما تحتاجه في مكان واحد</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Feature 1: Summarization -->
                <div class="bg-gray-100 p-8 rounded-lg shadow-lg text-center">
                    <h3 class="text-xl font-bold mb-3 text-blue-800">تلخيص ذكي</h3>
                    <p class="text-gray-600">حوّل الملفات الطويلة إلى ملخصات قصيرة ونقاط رئيسية لتوفير وقتك.</p>
                </div>
                <!-- Feature 2: Question Generation -->
                <div class="bg-gray-100 p-8 rounded-lg shadow-lg text-center">
                    <h3 class="text-xl font-bold mb-3 text-blue-800">إنشاء أسئلة</h3>
                    <p class="text-gray-600">أنشئ أسئلة تدريبية واختبارات من ملفاتك للتحضير للامتحانات.</p>
                </div>
                <!-- Feature 3: Translation -->
                <div class="bg-gray-100 p-8 rounded-lg shadow-lg text-center">
                    <h3 class="text-xl font-bold mb-3 text-blue-800">ترجمة أكاديمية</h3>
                    <p class="text-gray-600">ترجم بين العربية والإنجليزية مع الحفاظ على المصطلحات العلمية.</p>
                </div>
                 <!-- Feature 4: AI Assistant -->
                <div class="bg-gray-100 p-8 rounded-lg shadow-lg text-center">
                    <h3 class="text-xl font-bold mb-3 text-blue-800">مساعد ذكي</h3>
                    <p class="text-gray-600">احصل على إجابات فورية لأي سؤال يتعلق بمحتوى ملفاتك الدراسية.</p>
                </div>
                 <!-- Feature 5: Report Writing -->
                <div class="bg-gray-100 p-8 rounded-lg shadow-lg text-center">
                    <h3 class="text-xl font-bold mb-3 text-blue-800">كتابة التقارير</h3>
                    <p class="text-gray-600">ساعد في إعداد بحوث وتقارير منظمة بالشكل الأكاديمي المطلوب.</p>
                </div>
                 <!-- Feature 6: Secure -->
                <div class="bg-gray-100 p-8 rounded-lg shadow-lg text-center">
                    <h3 class="text-xl font-bold mb-3 text-blue-800">آمن ومجاني</h3>
                    <p class="text-gray-600">خدمة مجانية بالكامل مع ضمان خصوصية وأمان جميع ملفاتك.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- AI Tools Section -->
    <section id="ai-tools" class="py-20 bg-blue-50">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-12">جرب أدواتنا المدعومة بالذكاء الاصطناعي ✨</h2>
            <div class="grid md:grid-cols-1 lg:grid-cols-3 gap-8">
    
                <!-- Tool 1: Summarizer -->
                <div class="bg-white p-6 rounded-lg shadow-lg flex flex-col">
                    <h3 class="text-xl font-bold mb-4 text-blue-800">لخّص لي النص</h3>
                    <textarea id="summarize-input" class="w-full h-40 p-3 border rounded-md focus:ring-2 focus:ring-blue-500" placeholder="أدخل النص هنا لتلخيصه..."></textarea>
                    <button id="summarize-btn" class="mt-4 w-full bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition duration-300 flex items-center justify-center">
                        <span class="btn-text">تلخيص ✨</span>
                        <svg class="animate-spin h-5 w-5 text-white hidden ml-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    </button>
                    <div id="summarize-output" class="mt-4 p-4 bg-gray-100 rounded-md flex-grow min-h-[100px] whitespace-pre-wrap"></div>
                </div>
    
                <!-- Tool 2: Question Generator -->
                <div class="bg-white p-6 rounded-lg shadow-lg flex flex-col">
                    <h3 class="text-xl font-bold mb-4 text-blue-800">ولّد لي أسئلة</h3>
                    <textarea id="questions-input" class="w-full h-40 p-3 border rounded-md focus:ring-2 focus:ring-blue-500" placeholder="أدخل موضوعًا أو نصًا لإنشاء أسئلة حوله..."></textarea>
                    <button id="questions-btn" class="mt-4 w-full bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition duration-300 flex items-center justify-center">
                        <span class="btn-text">توليد الأسئلة ✨</span>
                        <svg class="animate-spin h-5 w-5 text-white hidden ml-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    </button>
                    <div id="questions-output" class="mt-4 p-4 bg-gray-100 rounded-md flex-grow min-h-[100px] whitespace-pre-wrap"></div>
                </div>
                
                <!-- Tool 3: Study Planner -->
                <div class="bg-white p-6 rounded-lg shadow-lg flex flex-col">
                    <h3 class="text-xl font-bold mb-4 text-blue-800">خطط لمذاكرتي</h3>
                    <textarea id="planner-input" class="w-full h-40 p-3 border rounded-md focus:ring-2 focus:ring-blue-500" placeholder="مثال: لدي امتحان في مادة تاريخ العالم الحديث بعد أسبوعين."></textarea>
                    <button id="planner-btn" class="mt-4 w-full bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition duration-300 flex items-center justify-center">
                        <span class="btn-text">إنشاء خطة دراسية ✨</span>
                        <svg class="animate-spin h-5 w-5 text-white hidden ml-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    </button>
                    <div id="planner-output" class="mt-4 p-4 bg-gray-100 rounded-md flex-grow min-h-[100px] whitespace-pre-wrap"></div>
                </div>
    
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="py-20 bg-gray-50">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-12">ماذا يقول الطلاب عنا؟</h2>
            <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <div class="bg-white p-6 rounded-lg shadow-lg border-l-4 border-blue-500">
                    <p class="text-gray-600 mb-4">"هذا الموقع غيّر طريقة مذاكرتي تمامًا. أصبحت ألخص فصولاً كاملة في دقائق. شكرًا لكم!"</p>
                    <p class="font-bold text-gray-800">- أحمد، طالب هندسة</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg border-l-4 border-blue-500">
                    <p class="text-gray-600 mb-4">"أداة إنشاء الأسئلة مذهلة، ساعدتني كثيرًا في التحضير للامتحان النهائي. أنصح به بشدة."</p>
                    <p class="font-bold text-gray-800">- فاطمة، طالبة طب</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-blue-900 text-white text-center py-6">
        <div class="container mx-auto px-6">
            <p>&copy; 2025 لكل الطلاب. جميع الحقوق محفوظة.</p>
        </div>
    </footer>

    <script>
        const summarizeBtn = document.getElementById('summarize-btn');
        const questionsBtn = document.getElementById('questions-btn');
        const plannerBtn = document.getElementById('planner-btn');
    
        const summarizeInput = document.getElementById('summarize-input');
        const questionsInput = document.getElementById('questions-input');
        const plannerInput = document.getElementById('planner-input');
    
        const summarizeOutput = document.getElementById('summarize-output');
        const questionsOutput = document.getElementById('questions-output');
        const plannerOutput = document.getElementById('planner-output');
    
        const apiKey = ""; // API key is left empty as per instructions
    
        async function callGemini(prompt, button, outputDiv) {
            const btnText = button.querySelector('.btn-text');
            const spinner = button.querySelector('svg');
    
            // Show loading state
            btnText.classList.add('hidden');
            spinner.classList.remove('hidden');
            button.disabled = true;
            outputDiv.textContent = 'جاري التفكير...';
    
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
            };
    
            let response;
            let retries = 3;
            let delay = 1000;
    
            while (retries > 0) {
                try {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
    
                    if (response.ok) {
                        const result = await response.json();
                        const candidate = result.candidates?.[0];
                        if (candidate && candidate.content?.parts?.[0]?.text) {
                            outputDiv.textContent = candidate.content.parts[0].text;
                        } else {
                            outputDiv.textContent = 'عذرًا، لم نتمكن من معالجة طلبك. قد يكون المحتوى غير مسموح به أو أن الرد كان فارغًا.';
                        }
                        break; // Exit loop on success
                    } else if (response.status === 429) { // Throttling
                        console.warn(`Request throttled. Retrying in ${delay / 1000}s...`);
                        await new Promise(resolve => setTimeout(resolve, delay));
                        delay *= 2; // Exponential backoff
                        retries--;
                    } else {
                        const error = await response.json();
                        console.error('API Error:', error);
                        outputDiv.textContent = `حدث خطأ: ${error.error?.message || response.statusText}`;
                        break; // Exit loop on other errors
                    }
                } catch (error) {
                    console.error('Fetch Error:', error);
                    retries--;
                    if (retries <= 0) {
                        outputDiv.textContent = 'حدث خطأ في الشبكة. يرجى المحاولة مرة أخرى.';
                        break;
                    }
                     await new Promise(resolve => setTimeout(resolve, delay));
                     delay *= 2;
                }
            }
            
            if (retries === 0 && !response?.ok) {
                 outputDiv.textContent = 'فشلت جميع محاولات الاتصال بالخادم. يرجى المحاولة مرة أخرى لاحقًا.';
            }
    
            // Hide loading state
            btnText.classList.remove('hidden');
            spinner.classList.add('hidden');
            button.disabled = false;
        }
    
        summarizeBtn.addEventListener('click', () => {
            const text = summarizeInput.value;
            if (text.trim() === '') {
                summarizeOutput.textContent = 'الرجاء إدخال نص لتلخيصه.';
                return;
            }
            const prompt = `لخّص النص التالي في نقاط رئيسية وواضحة باللغة العربية:\n\n${text}`;
            callGemini(prompt, summarizeBtn, summarizeOutput);
        });
    
        questionsBtn.addEventListener('click', () => {
            const text = questionsInput.value;
            if (text.trim() === '') {
                questionsOutput.textContent = 'الرجاء إدخال موضوع أو نص لتوليد الأسئلة.';
                return;
            }
            const prompt = `بناءً على الموضوع أو النص التالي، قم بإنشاء 5 أسئلة متنوعة (اختيار من متعدد، صواب وخطأ، أسئلة مقالية قصيرة) باللغة العربية للمساعدة في المراجعة للامتحان:\n\n${text}`;
            callGemini(prompt, questionsBtn, questionsOutput);
        });
    
        plannerBtn.addEventListener('click', () => {
            const text = plannerInput.value;
            if (text.trim() === '') {
                plannerOutput.textContent = 'الرجاء إدخال هدفك الدراسي.';
                return;
            }
            const prompt = `أنا طالب وأحتاج إلى خطة دراسية. هذا هو هدفي: "${text}".\n\nقم بإنشاء خطة دراسية أسبوعية مفصلة باللغة العربية لمساعدتي على تحقيق هذا الهدف. يجب أن تتضمن الخطة مهامًا يومية وأوقاتًا مقترحة للراحة. اجعل الخطة واقعية وقابلة للتنفيذ ومنظمة في جدول أو قائمة.`;
            callGemini(prompt, plannerBtn, plannerOutput);
        });
    </script>

</body>
</html>

